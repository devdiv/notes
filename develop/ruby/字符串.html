<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Ruby 字符串（String） | School</title>
    <meta name="description" content="测试、开发、读书、分享">
    <link rel="icon" href="/school/favicon.ico">
    
    <link rel="preload" href="/school/assets/css/0.styles.4be495fb.css" as="style"><link rel="preload" href="/school/assets/js/app.5919148e.js" as="script"><link rel="preload" href="/school/assets/js/97.5980228e.js" as="script"><link rel="prefetch" href="/school/assets/js/10.fade4ab6.js"><link rel="prefetch" href="/school/assets/js/100.f1e3a70d.js"><link rel="prefetch" href="/school/assets/js/101.d2d3543e.js"><link rel="prefetch" href="/school/assets/js/102.f8f6d632.js"><link rel="prefetch" href="/school/assets/js/103.90e3bf40.js"><link rel="prefetch" href="/school/assets/js/104.a13bdac5.js"><link rel="prefetch" href="/school/assets/js/105.ac842271.js"><link rel="prefetch" href="/school/assets/js/106.cc5d1227.js"><link rel="prefetch" href="/school/assets/js/107.a0ae32c4.js"><link rel="prefetch" href="/school/assets/js/108.1efce2f1.js"><link rel="prefetch" href="/school/assets/js/109.698e183c.js"><link rel="prefetch" href="/school/assets/js/11.2bd5c48e.js"><link rel="prefetch" href="/school/assets/js/110.1a5da71c.js"><link rel="prefetch" href="/school/assets/js/111.8a5819ae.js"><link rel="prefetch" href="/school/assets/js/112.650a583a.js"><link rel="prefetch" href="/school/assets/js/113.fa08142d.js"><link rel="prefetch" href="/school/assets/js/114.a23e36a1.js"><link rel="prefetch" href="/school/assets/js/115.432e59db.js"><link rel="prefetch" href="/school/assets/js/116.5af50ee5.js"><link rel="prefetch" href="/school/assets/js/117.326216e2.js"><link rel="prefetch" href="/school/assets/js/118.dcf4d7e5.js"><link rel="prefetch" href="/school/assets/js/119.d2995233.js"><link rel="prefetch" href="/school/assets/js/12.e9311be5.js"><link rel="prefetch" href="/school/assets/js/120.391137a1.js"><link rel="prefetch" href="/school/assets/js/121.4436956a.js"><link rel="prefetch" href="/school/assets/js/122.f74e4590.js"><link rel="prefetch" href="/school/assets/js/123.3d8fa706.js"><link rel="prefetch" href="/school/assets/js/124.b34aa8a2.js"><link rel="prefetch" href="/school/assets/js/125.ddf01853.js"><link rel="prefetch" href="/school/assets/js/126.35d0c26a.js"><link rel="prefetch" href="/school/assets/js/127.a40de122.js"><link rel="prefetch" href="/school/assets/js/128.06b91001.js"><link rel="prefetch" href="/school/assets/js/129.15b17132.js"><link rel="prefetch" href="/school/assets/js/13.98cbe429.js"><link rel="prefetch" href="/school/assets/js/130.a0f4d6e0.js"><link rel="prefetch" href="/school/assets/js/131.a717eb4e.js"><link rel="prefetch" href="/school/assets/js/132.849113fe.js"><link rel="prefetch" href="/school/assets/js/133.d18980d1.js"><link rel="prefetch" href="/school/assets/js/134.e89246fc.js"><link rel="prefetch" href="/school/assets/js/135.b2bc455d.js"><link rel="prefetch" href="/school/assets/js/136.45a588ea.js"><link rel="prefetch" href="/school/assets/js/137.0bf37a9b.js"><link rel="prefetch" href="/school/assets/js/138.f029cd36.js"><link rel="prefetch" href="/school/assets/js/139.41233bdd.js"><link rel="prefetch" href="/school/assets/js/14.74114c20.js"><link rel="prefetch" href="/school/assets/js/140.460cae24.js"><link rel="prefetch" href="/school/assets/js/141.d4271585.js"><link rel="prefetch" href="/school/assets/js/142.b589d733.js"><link rel="prefetch" href="/school/assets/js/143.608d8545.js"><link rel="prefetch" href="/school/assets/js/144.cbcac9cf.js"><link rel="prefetch" href="/school/assets/js/145.ea04f41b.js"><link rel="prefetch" href="/school/assets/js/15.a049d4ce.js"><link rel="prefetch" href="/school/assets/js/16.9b4c6ccb.js"><link rel="prefetch" href="/school/assets/js/17.340d1183.js"><link rel="prefetch" href="/school/assets/js/18.4fd81d9b.js"><link rel="prefetch" href="/school/assets/js/19.10c83c8c.js"><link rel="prefetch" href="/school/assets/js/2.22312ed6.js"><link rel="prefetch" href="/school/assets/js/20.27a9629f.js"><link rel="prefetch" href="/school/assets/js/21.00f328b8.js"><link rel="prefetch" href="/school/assets/js/22.246edaaa.js"><link rel="prefetch" href="/school/assets/js/23.569cf05b.js"><link rel="prefetch" href="/school/assets/js/24.b75ec5f9.js"><link rel="prefetch" href="/school/assets/js/25.d9c96029.js"><link rel="prefetch" href="/school/assets/js/26.d2989e35.js"><link rel="prefetch" href="/school/assets/js/27.38bd00fc.js"><link rel="prefetch" href="/school/assets/js/28.bf117d3d.js"><link rel="prefetch" href="/school/assets/js/29.aa663b5e.js"><link rel="prefetch" href="/school/assets/js/3.87a7fe20.js"><link rel="prefetch" href="/school/assets/js/30.4fa409f9.js"><link rel="prefetch" href="/school/assets/js/31.87a58a0d.js"><link rel="prefetch" href="/school/assets/js/32.b7ba24fc.js"><link rel="prefetch" href="/school/assets/js/33.37e4bea3.js"><link rel="prefetch" href="/school/assets/js/34.dcdbe51e.js"><link rel="prefetch" href="/school/assets/js/35.14aa36e0.js"><link rel="prefetch" href="/school/assets/js/36.79d04462.js"><link rel="prefetch" href="/school/assets/js/37.e4ea4dea.js"><link rel="prefetch" href="/school/assets/js/38.a85423a8.js"><link rel="prefetch" href="/school/assets/js/39.c7de24ba.js"><link rel="prefetch" href="/school/assets/js/4.595056df.js"><link rel="prefetch" href="/school/assets/js/40.7d122e75.js"><link rel="prefetch" href="/school/assets/js/41.07c5d7be.js"><link rel="prefetch" href="/school/assets/js/42.5b0ebac0.js"><link rel="prefetch" href="/school/assets/js/43.94fe92ec.js"><link rel="prefetch" href="/school/assets/js/44.4c7bfe54.js"><link rel="prefetch" href="/school/assets/js/45.e4cb3de7.js"><link rel="prefetch" href="/school/assets/js/46.bb278b4a.js"><link rel="prefetch" href="/school/assets/js/47.e76dfb98.js"><link rel="prefetch" href="/school/assets/js/48.b31f649b.js"><link rel="prefetch" href="/school/assets/js/49.e267fd5e.js"><link rel="prefetch" href="/school/assets/js/5.39a214e3.js"><link rel="prefetch" href="/school/assets/js/50.6840fcd0.js"><link rel="prefetch" href="/school/assets/js/51.5745d53f.js"><link rel="prefetch" href="/school/assets/js/52.478a6ddd.js"><link rel="prefetch" href="/school/assets/js/53.44cdfd3f.js"><link rel="prefetch" href="/school/assets/js/54.8a5af591.js"><link rel="prefetch" href="/school/assets/js/55.1a8fdf3e.js"><link rel="prefetch" href="/school/assets/js/56.ecd3e841.js"><link rel="prefetch" href="/school/assets/js/57.fe119433.js"><link rel="prefetch" href="/school/assets/js/58.e6a22b8b.js"><link rel="prefetch" href="/school/assets/js/59.84baf76a.js"><link rel="prefetch" href="/school/assets/js/6.7d46c36f.js"><link rel="prefetch" href="/school/assets/js/60.f908a13b.js"><link rel="prefetch" href="/school/assets/js/61.c7344d3f.js"><link rel="prefetch" href="/school/assets/js/62.c97bc8e3.js"><link rel="prefetch" href="/school/assets/js/63.efbe6fc7.js"><link rel="prefetch" href="/school/assets/js/64.1277d2c7.js"><link rel="prefetch" href="/school/assets/js/65.eb54ca23.js"><link rel="prefetch" href="/school/assets/js/66.0b1ba8bd.js"><link rel="prefetch" href="/school/assets/js/67.385c0c77.js"><link rel="prefetch" href="/school/assets/js/68.4c893e50.js"><link rel="prefetch" href="/school/assets/js/69.12135c2b.js"><link rel="prefetch" href="/school/assets/js/7.744731e1.js"><link rel="prefetch" href="/school/assets/js/70.71c79c5e.js"><link rel="prefetch" href="/school/assets/js/71.72a18539.js"><link rel="prefetch" href="/school/assets/js/72.95e9d83c.js"><link rel="prefetch" href="/school/assets/js/73.90341a68.js"><link rel="prefetch" href="/school/assets/js/74.7972018c.js"><link rel="prefetch" href="/school/assets/js/75.a3483662.js"><link rel="prefetch" href="/school/assets/js/76.ec272a20.js"><link rel="prefetch" href="/school/assets/js/77.63c05270.js"><link rel="prefetch" href="/school/assets/js/78.ea39a90e.js"><link rel="prefetch" href="/school/assets/js/79.bb45e240.js"><link rel="prefetch" href="/school/assets/js/8.ad4334f4.js"><link rel="prefetch" href="/school/assets/js/80.1569ceac.js"><link rel="prefetch" href="/school/assets/js/81.a98852bf.js"><link rel="prefetch" href="/school/assets/js/82.cacaf5de.js"><link rel="prefetch" href="/school/assets/js/83.880176ef.js"><link rel="prefetch" href="/school/assets/js/84.d1bc1585.js"><link rel="prefetch" href="/school/assets/js/85.cee621f6.js"><link rel="prefetch" href="/school/assets/js/86.4b65046f.js"><link rel="prefetch" href="/school/assets/js/87.ed640799.js"><link rel="prefetch" href="/school/assets/js/88.9b6032d2.js"><link rel="prefetch" href="/school/assets/js/89.43b51396.js"><link rel="prefetch" href="/school/assets/js/9.c996555b.js"><link rel="prefetch" href="/school/assets/js/90.1ea68c22.js"><link rel="prefetch" href="/school/assets/js/91.caec5965.js"><link rel="prefetch" href="/school/assets/js/92.9fadc1eb.js"><link rel="prefetch" href="/school/assets/js/93.948f712f.js"><link rel="prefetch" href="/school/assets/js/94.69a0a901.js"><link rel="prefetch" href="/school/assets/js/95.4d6b9e32.js"><link rel="prefetch" href="/school/assets/js/96.c41dfb08.js"><link rel="prefetch" href="/school/assets/js/98.ac37f10d.js"><link rel="prefetch" href="/school/assets/js/99.b762e5e6.js">
    <link rel="stylesheet" href="/school/assets/css/0.styles.4be495fb.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/school/" class="home-link router-link-active"><!----> <span class="site-name">School</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/school/" class="nav-link">首页</a></div><div class="nav-item"><a href="/school/website/" class="nav-link">收藏</a></div><div class="nav-item"><a href="/school/tools/" class="nav-link">工具</a></div><div class="nav-item"><a href="/school/article/" class="nav-link">文章</a></div><div class="nav-item"><a href="/school/testing/" class="nav-link">测试</a></div><div class="nav-item"><a href="/school/develop/" class="nav-link router-link-active">开发</a></div><div class="nav-item"><a href="/school/blog/" class="nav-link">博客</a></div><div class="nav-item"><a href="/school/reading/" class="nav-link">读书</a></div> <a href="https://github.com/devdiv/school" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/school/" class="nav-link">首页</a></div><div class="nav-item"><a href="/school/website/" class="nav-link">收藏</a></div><div class="nav-item"><a href="/school/tools/" class="nav-link">工具</a></div><div class="nav-item"><a href="/school/article/" class="nav-link">文章</a></div><div class="nav-item"><a href="/school/testing/" class="nav-link">测试</a></div><div class="nav-item"><a href="/school/develop/" class="nav-link router-link-active">开发</a></div><div class="nav-item"><a href="/school/blog/" class="nav-link">博客</a></div><div class="nav-item"><a href="/school/reading/" class="nav-link">读书</a></div> <a href="https://github.com/devdiv/school" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>开发</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/school/develop/" class="sidebar-link">前言</a></li><li><a href="/school/develop/Android.html" class="sidebar-link">Android</a></li><li><a href="/school/develop/csharp.html" class="sidebar-link">C Sharp</a></li><li><a href="/school/develop/css.html" class="sidebar-link">CSS</a></li><li><a href="/school/develop/django.html" class="sidebar-link">Django</a></li><li><a href="/school/develop/docker.html" class="sidebar-link">Docker</a></li><li><a href="/school/develop/go.html" class="sidebar-link">Go</a></li><li><a href="/school/develop/Java.html" class="sidebar-link">Java</a></li><li><a href="/school/develop/javascript.html" class="sidebar-link">JavaScript</a></li><li><a href="/school/develop/python.html" class="sidebar-link">Python</a></li><li><a href="/school/develop/Rails.html" class="sidebar-link">Rails</a></li><li><a href="/school/develop/ruby.html" class="sidebar-link">Ruby</a></li><li><a href="/school/develop/vue.html" class="sidebar-link">Vue</a></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h2 id="ruby-字符串（string）"><a href="#ruby-字符串（string）" class="header-anchor">#</a> Ruby 字符串（String）</h2> <p>Ruby 中的 String 对象用于存储或操作一个或多个字节的序列。</p> <p>Ruby 字符串分为单引号字符串（'）和双引号字符串（&quot;），区别在于双引号字符串能够支持更多的转义字符。</p> <p>1、转义字符</p> <p>下标列出了可使用反斜杠符号转义的转义字符或非打印字符。</p> <p><strong>注</strong>：在一个双引号括起的字符串内，转义字符会被解析。在一个单引号括起的字符串内，转义字符不会被解析，原样输出。</p> <table><thead><tr><th>反斜杠符号</th> <th>十六进制字符</th> <th>描述</th></tr></thead> <tbody><tr><td>\a</td> <td>0x07</td> <td>报警符</td></tr> <tr><td>\b</td> <td>0x08</td> <td>退格键</td></tr> <tr><td>\cx</td> <td></td> <td>Control-x</td></tr> <tr><td>\C-x</td> <td></td> <td>Control-x</td></tr> <tr><td>\e</td> <td>0x1b</td> <td>转义符</td></tr> <tr><td>\f</td> <td>0x0c</td> <td>换页符</td></tr> <tr><td>\M-\C-x</td> <td></td> <td>Meta-Control-x</td></tr> <tr><td>\n</td> <td>0x0a</td> <td>换行符</td></tr> <tr><td>\nnn</td> <td></td> <td>八进制表示法，其中 n 的范围为 0.7</td></tr> <tr><td>\r</td> <td>0x0d</td> <td>回车符</td></tr> <tr><td>\s</td> <td>0x20</td> <td>空格符</td></tr> <tr><td>\t</td> <td>0x09</td> <td>制表符</td></tr> <tr><td>\v</td> <td>0x0b</td> <td>垂直制表符</td></tr> <tr><td>\x</td> <td></td> <td>字符 x</td></tr> <tr><td>\xnn</td> <td></td> <td>十六进制表示法，其中 n 的范围为 0.9、 a.f 或 A.F</td></tr></tbody></table> <p>2、字符编码</p> <p>Ruby 的默认字符集是 ASCII，字符可用单个字节表示。如果您使用 UTF-8 或其他现代的字符集，字符可能是用一个到四个字节表示。</p> <p>您可以在程序开头使用 $KCODE 改变字符集，如下所示：</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token variable">$KCODE</span> <span class="token operator">=</span> <span class="token string">'u'</span>
</code></pre></div><p>下面是 $KCODE 可能的值。</p> <table><thead><tr><th>编码</th> <th>描述</th></tr></thead> <tbody><tr><td>a</td> <td>ASCII （与 none 相同）。这是默认的。</td></tr> <tr><td>e</td> <td>EUC。</td></tr> <tr><td>n</td> <td>None （与 ASCII 相同）。</td></tr> <tr><td>u</td> <td>UTF-8。</td></tr></tbody></table> <p>3、字符串内建方法</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token keyword">new</span> <span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">.</span><span class="token keyword">new</span><span class="token punctuation">(</span>str<span class="token operator">=</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
</code></pre></div><p>这将返回一个包含 str 副本的新的字符串对象。现在，使用 str 对象，我们可以调用任意可用的实例方法。例如：</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token comment">#!/usr/bin/ruby</span>

myStr <span class="token operator">=</span> <span class="token builtin">String</span><span class="token punctuation">.</span><span class="token keyword">new</span><span class="token punctuation">(</span><span class="token string">&quot;THIS IS TEST&quot;</span><span class="token punctuation">)</span>
foo <span class="token operator">=</span> myStr<span class="token punctuation">.</span>downcase

puts <span class="token string">&quot;<span class="token interpolation"><span class="token delimiter tag">#{</span>foo<span class="token delimiter tag">}</span></span>&quot;</span>
</code></pre></div><p>下面是公共的字符串方法（假设 str 是一个 String 对象）：</p> <table><thead><tr><th>序号</th> <th>方法</th> <th>描述</th></tr></thead> <tbody><tr><td>1</td> <td><code>str % arg</code></td> <td>使用格式规范格式化字符串。如果 arg 包含一个以上的替代，那么 arg 必须是一个数组。如需了解更多格式规范的信息，请查看&quot;内核模块&quot;下的 sprintf。</td></tr> <tr><td>2</td> <td><code>str * integer</code></td> <td>返回一个包含 integer 个 str 的新的字符串。换句话说，str 被重复了 integer 次。</td></tr> <tr><td>3</td> <td><code>str + other_str</code></td> <td>连接 other_str 到 str。</td></tr> <tr><td>4</td> <td><code>str &lt;&lt; obj</code></td> <td>连接一个对象到字符串。如果对象是范围为 0.255 之间的固定数字 Fixnum，则它会被转换为一个字符。把它与 concat 进行比较。</td></tr> <tr><td>5</td> <td><code>str &lt;=&gt; other_str</code></td> <td>把 str 与 other_str 进行比较，返回 -1（小于）、0（等于）或 1（大于）。比较是区分大小写的。</td></tr> <tr><td>6</td> <td><code>str == obj</code></td> <td>检查 str 和 obj 的相等性。如果 obj 不是字符串，则返回 false，如果 str &lt;=&gt; obj，则返回 true，返回 0。</td></tr> <tr><td>7</td> <td><code>str =~ obj</code></td> <td>根据正则表达式模式 obj 匹配 str。返回匹配开始的位置，否则返回 false。</td></tr> <tr><td>8</td> <td><code>str[position] str[start, length] str[start..end] str[start...end]</code></td> <td>str[position] # 注意返回的是 ASCII 码而不是字符。使用索引截取子串</td></tr> <tr><td>9</td> <td><code>str.capitalize</code></td> <td>把字符串转换为大写字母显示。</td></tr> <tr><td>10</td> <td><code>str.capitalize!</code></td> <td>与 capitalize 相同，但是 str 会发生变化并返回。</td></tr> <tr><td>11</td> <td><code>str.casecmp</code></td> <td>不区分大小写的字符串比较。</td></tr> <tr><td>12</td> <td><code>str.center</code></td> <td>居中字符串。</td></tr> <tr><td>13</td> <td><code>str.chomp</code></td> <td>从字符串末尾移除记录分隔符（$/），通常是 \n。如果没有记录分隔符，则不进行任何操作。</td></tr> <tr><td>14</td> <td><code>str.chomp!</code></td> <td>与 chomp 相同，但是 str 会发生变化并返回。</td></tr> <tr><td>15</td> <td><code>str.chop</code></td> <td>移除 str 中的最后一个字符。</td></tr> <tr><td>16</td> <td><code>str.chop!</code></td> <td>与 chop 相同，但是 str 会发生变化并返回。</td></tr> <tr><td>17</td> <td><code>str.concat(other_str)</code></td> <td>连接 other_str 到 str。</td></tr> <tr><td>18</td> <td><code>str.count(str, ...)</code></td> <td>给一个或多个字符集计数。如果有多个字符集，则给这些集合的交集计数。</td></tr> <tr><td>19</td> <td><code>str.crypt(other_str)</code></td> <td>对 str 应用单向加密哈希。参数是两个字符长的字符串，每个字符的范围为 a.z、 A.Z、 0.9、 . 或 /。</td></tr> <tr><td>20</td> <td><code>str.delete(other_str, ...)</code></td> <td>返回 str 的副本，参数交集中的所有字符会被删除。</td></tr> <tr><td>21</td> <td><code>str.delete!(other_str, ...)</code></td> <td>与 delete 相同，但是 str 会发生变化并返回。</td></tr> <tr><td>22</td> <td><code>str.downcase</code></td> <td>返回 str 的副本，所有的大写字母会被替换为小写字母。</td></tr> <tr><td>23</td> <td><code>str.downcase!</code></td> <td>与 downcase 相同，但是 str 会发生变化并返回。</td></tr> <tr><td>24</td> <td><code>str.dump</code></td> <td>返回 str 的版本，所有的非打印字符被替换为 \nnn 符号，所有的特殊字符被转义。</td></tr> <tr><td>25</td> <td><code>str.each(separator=$/) { |substr| block }</code></td> <td>使用参数作为记录分隔符（默认是 $/）分隔 str，传递每个子字符串给被提供的块。</td></tr> <tr><td>26</td> <td><code>str.each_byte { |fixnum| block }</code></td> <td>传递 str 的每个字节给 block，以字节的十进制表示法返回每个字节。</td></tr> <tr><td>27</td> <td><code>str.each_line(separator=$/) { |substr| block }</code></td> <td>使用参数作为记录分隔符（默认是 $/）分隔 str，传递每个子字符串给被提供的 block。</td></tr> <tr><td>28</td> <td><code>str.empty?</code></td> <td>如果 str 为空（即长度为 0），则返回 true。</td></tr> <tr><td>29</td> <td><code>str.eql?(other)</code></td> <td>如果两个字符串有相同的长度和内容，则这两个字符串相等。</td></tr> <tr><td>30</td> <td><code>str.gsub(pattern, replacement) [or]str.gsub(pattern) { |match| block }</code></td> <td>返回 str 的副本，pattern 的所有出现都替换为 replacement 或 block 的值。pattern 通常是一个正则表达式 Regexp；如果是一个字符串 String，则没有正则表达式元字符被解释（即，/\d/ 将匹配一个数字，但 '\d' 将匹配一个反斜杠后跟一个 'd'）。</td></tr> <tr><td>31</td> <td><code>str[fixnum] [or] str[fixnum,fixnum] [or] str[range] [or] str[regexp] [or] str[regexp, fixnum] [or] str[other_str]</code></td> <td>使用下列的参数引用 str：参数为一个 Fixnum，则返回 fixnum 的字符编码；参数为两个 Fixnum，则返回一个从偏移（第一个 fixnum）开始截至到长度（第二个 fixnum）为止的子字符串；参数为 range，则返回该范围内的一个子字符串；参数为 regexp，则返回匹配字符串的部分；参数为带有 fixnum 的 regexp，则返回 fixnum 位置的匹配数据；参数为 other_str，则返回匹配 other_str 的子字符串。一个负数的 Fixnum 从字符串的末尾 -1 开始。</td></tr> <tr><td>32</td> <td><code>str[fixnum] = fixnum [or] str[fixnum] = new_str [or] str[fixnum, fixnum] = new_str [or] str[range] = aString [or] str[regexp] =new_str [or] str[regexp, fixnum] =new_str [or] str[other_str] = new_str ]</code></td> <td>替换整个字符串或部分字符串。与 slice! 同义。</td></tr> <tr><td>33</td> <td><code>str.gsub!(pattern, replacement) [or] str.gsub!(pattern) { |match| block }</code></td> <td>执行 String#gsub 的替换，返回 str，如果没有替换被执行则返回 nil。</td></tr> <tr><td>34</td> <td><code>str.hash</code></td> <td>返回一个基于字符串长度和内容的哈希。</td></tr> <tr><td>35</td> <td><code>str.hex</code></td> <td>把 str 的前导字符当作十六进制数字的字符串（一个可选的符号和一个可选的 0x），并返回相对应的数字。如果错误则返回零。</td></tr> <tr><td>36</td> <td><code>str.include? other_str [or] str.include? fixnum</code></td> <td>如果 str 包含给定的字符串或字符，则返回 true。</td></tr> <tr><td>37</td> <td><code>str.index(substring [, offset]) [or] str.index(fixnum [, offset]) [or]str.index(regexp [, offset])</code></td> <td>返回给定子字符串、字符（fixnum）或模式（regexp）在 str 中第一次出现的索引。如果未找到则返回 nil。如果提供了第二个参数，则指定在字符串中开始搜索的位置。</td></tr> <tr><td>38</td> <td><code>str.insert(index, other_str)</code></td> <td>在给定索引的字符前插入 other_str，修改 str。负值索引从字符串的末尾开始计数，并在给定字符后插入。其意图是在给定的索引处开始插入一个字符串。</td></tr> <tr><td>39</td> <td><code>str.inspect</code></td> <td>返回 str 的可打印版本，带有转义的特殊字符。</td></tr> <tr><td>40</td> <td><code>str.intern [or] str.to_sym</code></td> <td>返回与 str 相对应的符号，如果之前不存在，则创建符号。</td></tr> <tr><td>41</td> <td><code>str.length</code></td> <td>返回 str 的长度。把它与 size 进行比较。</td></tr> <tr><td>42</td> <td><code>str.ljust(integer, padstr=' ')</code></td> <td>如果 integer 大于 str 的长度，则返回长度为 integer 的新字符串，新字符串以 str 左对齐，并以 padstr 作为填充。否则，返回 str。</td></tr> <tr><td>43</td> <td><code>str.lstrip</code></td> <td>返回 str 的副本，移除了前导的空格。</td></tr> <tr><td>44</td> <td><code>str.lstrip!</code></td> <td>从 str 中移除前导的空格，如果没有变化则返回 nil。</td></tr> <tr><td>45</td> <td><code>str.match(pattern)</code></td> <td>如果 pattern 不是正则表达式，则把 pattern 转换为正则表达式 Regexp，然后在 str 上调用它的匹配方法。</td></tr> <tr><td>46</td> <td><code>str.oct</code></td> <td>把 str 的前导字符当作十进制数字的字符串（一个可选的符号），并返回相对应的数字。如果转换失败，则返回 0。</td></tr> <tr><td>47</td> <td><code>str.replace(other_str)</code></td> <td>把 str 中的内容替换为 other_str 中的相对应的值。</td></tr> <tr><td>48</td> <td><code>str.reverse</code></td> <td>返回一个新字符串，新字符串是 str 的倒序。</td></tr> <tr><td>49</td> <td><code>str.reverse!</code></td> <td>逆转 str，str 会发生变化并返回。</td></tr> <tr><td>50</td> <td><code>str.rindex(substring [, fixnum]) [or]str.rindex(fixnum [, fixnum]) [or]str.rindex(regexp [, fixnum])</code></td> <td>返回给定子字符串、字符（fixnum）或模式（regexp）在 str 中最后一次出现的索引。如果未找到则返回 nil。如果提供了第二个参数，则指定在字符串中结束搜索的位置。超出该点的字符将不被考虑。</td></tr> <tr><td>51</td> <td><code>str.rjust(integer, padstr=' ')</code></td> <td>如果 integer 大于 str 的长度，则返回长度为 integer 的新字符串，新字符串以 str 右对齐，并以 padstr 作为填充。否则，返回 str。</td></tr> <tr><td>52</td> <td><code>str.rstrip</code></td> <td>返回 str 的副本，移除了尾随的空格。</td></tr> <tr><td>53</td> <td><code>str.rstrip!</code></td> <td>从 str 中移除尾随的空格，如果没有变化则返回 nil。</td></tr> <tr><td>54</td> <td><code>str.scan(pattern) [or]str.scan(pattern) { |match, ...| block }</code></td> <td>两种形式匹配 pattern（可以是一个正则表达式 Regexp 或一个字符串 String）遍历 str。针对每个匹配，会生成一个结果，结果会添加到结果数组中或传递给 block。如果 pattern 不包含分组，则每个独立的结果由匹配的字符串、$&amp; 组成。如果 pattern 包含分组，每个独立的结果是一个包含每个分组入口的数组。</td></tr> <tr><td>55</td> <td><code>str.slice(fixnum) [or] str.slice(fixnum, fixnum) [or]str.slice(range) [or] str.slice(regexp) [or]str.slice(regexp, fixnum) [or] str.slice(other_str)See str[fixnum], etc.str.slice!(fixnum) [or] str.slice!(fixnum, fixnum) [or] str.slice!(range) [or] str.slice!(regexp) [or] str.slice!(other_str)</code></td> <td>从 str 中删除指定的部分，并返回删除的部分。如果值超出范围，参数带有 Fixnum 的形式，将生成一个 IndexError。参数为 range 的形式，将生成一个 RangeError，参数为 Regexp 和 String 的形式，将忽略执行动作。</td></tr> <tr><td>56</td> <td><code>str.split(pattern=$;, [limit])</code></td> <td>基于分隔符，把 str 分成子字符串，并返回这些子字符串的数组。如果 pattern 是一个字符串 String，那么在分割 str 时，它将作为分隔符使用。如果 pattern 是一个单一的空格，那么 str 是基于空格进行分割，会忽略前导空格和连续空格字符。如果 pattern 是一个正则表达式 Regexp，则 str 在 pattern 匹配的地方被分割。当 pattern 匹配一个零长度的字符串时，str 被分割成单个字符。如果省略了 pattern 参数，则使用 $; 的值。如果 $; 为 nil（默认的），str 基于空格进行分割，就像是指定了 `` 作为分隔符一样。如果省略了 limit 参数，会抑制尾随的 null 字段。如果 limit 是一个正数，则最多返回该数量的字段（如果 limit 为 1，则返回整个字符串作为数组中的唯一入口）。如果 limit 是一个负数，则返回的字段数量不限制，且不抑制尾随的 null 字段。</td></tr> <tr><td>57</td> <td><code>str.squeeze([other_str]*)</code></td> <td>使用为 String#count 描述的程序从 other_str 参数建立一系列字符。返回一个新的字符串，其中集合中出现的相同的字符会被替换为单个字符。如果没有给出参数，则所有相同的字符都被替换为单个字符。</td></tr> <tr><td>58</td> <td><code>str.squeeze!([other_str]*)</code></td> <td>与 squeeze 相同，但是 str 会发生变化并返回，如果没有变化则返回 nil。</td></tr> <tr><td>59</td> <td><code>str.strip</code></td> <td>返回 str 的副本，移除了前导的空格和尾随的空格。</td></tr> <tr><td>60</td> <td><code>str.strip!</code></td> <td>从 str 中移除前导的空格和尾随的空格，如果没有变化则返回 nil。</td></tr> <tr><td>61</td> <td><code>str.sub(pattern, replacement) [or]str.sub(pattern) { |match| block }</code></td> <td>返回 str 的副本，pattern 的第一次出现会被替换为 replacement 或 block 的值。pattern 通常是一个正则表达式 Regexp；如果是一个字符串 String，则没有正则表达式元字符被解释。</td></tr> <tr><td>62</td> <td><code>str.sub!(pattern, replacement) [or]str.sub!(pattern) { |match| block }</code></td> <td>执行 String#sub 替换，并返回 str，如果没有替换执行，则返回 nil。</td></tr> <tr><td>63</td> <td><code>str.succ [or] str.next</code></td> <td>返回 str 的继承。</td></tr> <tr><td>64</td> <td><code>str.succ! [or] str.next!</code></td> <td>相当于 String#succ，但是 str 会发生变化并返回。</td></tr> <tr><td>65</td> <td><code>str.sum(n=16)</code></td> <td>返回 str 中字符的 n-bit 校验和，其中 n 是可选的 Fixnum 参数，默认为 16。结果是简单地把 str 中每个字符的二进制值的总和，以 2n - 1 为模。这不是一个特别好的校验和。</td></tr> <tr><td>66</td> <td><code>str.swapcase</code></td> <td>返回 str 的副本，所有的大写字母转换为小写字母，所有的小写字母转换为大写字母。</td></tr> <tr><td>67</td> <td><code>str.swapcase!</code></td> <td>相当于 String#swapcase，但是 str 会发生变化并返回，如果没有变化则返回 nil。</td></tr> <tr><td>68</td> <td><code>str.to_f</code></td> <td>返回把 str 中的前导字符解释为浮点数的结果。超出有效数字的末尾的多余字符会被忽略。如果在 str 的开头没有有效数字，则返回 0.0。该方法不会生成异常。</td></tr> <tr><td>69</td> <td><code>str.to_i(base=10)</code></td> <td>返回把 str 中的前导字符解释为整数基数（基数为 2、 8、 10 或 16）的结果。超出有效数字的末尾的多余字符会被忽略。如果在 str 的开头没有有效数字，则返回 0。该方法不会生成异常。</td></tr> <tr><td>70</td> <td><code>str.to_s [or] str.to_str</code></td> <td>返回接收的值。</td></tr> <tr><td>71</td> <td><code>str.tr(from_str, to_str)</code></td> <td>返回 str 的副本，把 from_str 中的字符替换为 to_str 中相对应的字符。如果 to_str 比 from_str 短，那么它会以最后一个字符进行填充。两个字符串都可以使用 c1.c2 符号表示字符的范围。如果 from_str 以 ^ 开头，则表示除了所列出的字符以外的所有字符。</td></tr> <tr><td>72</td> <td><code>str.tr!(from_str, to_str)</code></td> <td>相当于 String#tr，但是 str 会发生变化并返回，如果没有变化则返回 nil。</td></tr> <tr><td>73</td> <td><code>str.tr_s(from_str, to_str)</code></td> <td>把 str 按照 String#tr 描述的规则进行处理，然后移除会影响翻译的重复字符。</td></tr> <tr><td>74</td> <td><code>str.tr_s!(from_str, to_str)</code></td> <td>相当于 String#tr_s，但是 str 会发生变化并返回，如果没有变化则返回 nil。</td></tr> <tr><td>75</td> <td><code>str.unpack(format)</code></td> <td>根据 format 字符串解码 str（可能包含二进制数据），返回被提取的每个值的数组。format 字符由一系列单字符指令组成。每个指令后可以跟着一个数字，表示重复该指令的次数。星号（*）将使用所有剩余的元素。指令 sSiIlL 每个后可能都跟着一个下划线（_），为指定类型使用底层平台的本地尺寸大小，否则使用独立于平台的一致的尺寸大小。format 字符串中的空格会被忽略。</td></tr> <tr><td>76</td> <td><code>str.upcase</code></td> <td>返回 str 的副本，所有的小写字母会被替换为大写字母。操作是环境不敏感的，只有字符 a 到 z 会受影响。</td></tr> <tr><td>77</td> <td><code>str.upcase!</code></td> <td>改变 str 的内容为大写，如果没有变化则返回 nil。</td></tr> <tr><td>78</td> <td><code>str.upto(other_str) { |s| block }</code></td> <td>遍历连续值，以 str 开始，以 other_str 结束（包含），轮流传递每个值给 block。String#succ 方法用于生成每个值。</td></tr></tbody></table> <p>4、字符串 unpack 指令</p> <table><thead><tr><th>指令</th> <th>返回</th> <th>描述</th></tr></thead> <tbody><tr><td>A</td> <td>String</td> <td>移除尾随的 null 和空格。</td></tr> <tr><td>a</td> <td>String</td> <td>字符串。</td></tr> <tr><td>B</td> <td>String</td> <td>从每个字符中提取位（首先是最高有效位）。</td></tr> <tr><td>b</td> <td>String</td> <td>从每个字符中提取位（首先是最低有效位）。</td></tr> <tr><td>C</td> <td>Fixnum</td> <td>提取一个字符作为无符号整数。</td></tr> <tr><td>c</td> <td>Fixnum</td> <td>提取一个字符作为整数。</td></tr> <tr><td>D, d</td> <td>Float</td> <td>把 sizeof(double) 长度的字符当作原生的 double。</td></tr> <tr><td>E</td> <td>Float</td> <td>把 sizeof(double) 长度的字符当作 littleendian 字节顺序的 double。</td></tr> <tr><td>e</td> <td>Float</td> <td>把 sizeof(float) 长度的字符当作 littleendian 字节顺序的 float。</td></tr> <tr><td>F, f</td> <td>Float</td> <td>把 sizeof(float) 长度的字符当作原生的 float。</td></tr> <tr><td>G</td> <td>Float</td> <td>把 sizeof(double) 长度的字符当作 network 字节顺序的 double。</td></tr> <tr><td>g</td> <td>Float</td> <td>把 sizeof(float) 长度的字符当作 network 字节顺序的 float。</td></tr> <tr><td>H</td> <td>String</td> <td>从每个字符中提取十六进制（首先是最高有效位）。</td></tr> <tr><td>h</td> <td>String</td> <td>从每个字符中提取十六进制（首先是最低有效位）。</td></tr> <tr><td>I</td> <td>Integer</td> <td>把 sizeof(int) 长度（通过 _ 修改）的连续字符当作原生的 integer。</td></tr> <tr><td>i</td> <td>Integer</td> <td>把 sizeof(int) 长度（通过 _ 修改）的连续字符当作有符号的原生的 integer。</td></tr> <tr><td>L</td> <td>Integer</td> <td>把四个（通过 _ 修改）连续字符当作无符号的原生的 long integer。</td></tr> <tr><td>l</td> <td>Integer</td> <td>把四个（通过 _ 修改）连续字符当作有符号的原生的 long integer。</td></tr> <tr><td>M</td> <td>String</td> <td>引用可打印的。</td></tr> <tr><td>m</td> <td>String</td> <td>Base64 编码。</td></tr> <tr><td>N</td> <td>Integer</td> <td>把四个字符当作 network 字节顺序的无符号的 long。</td></tr> <tr><td>n</td> <td>Fixnum</td> <td>把两个字符当作 network 字节顺序的无符号的 short。</td></tr> <tr><td>P</td> <td>String</td> <td>把 sizeof(char *) 长度的字符当作指针，并从引用的位置返回 \emph{len} 字符。</td></tr> <tr><td>p</td> <td>String</td> <td>把 sizeof(char *) 长度的字符当作一个空结束字符的指针。</td></tr> <tr><td>Q</td> <td>Integer</td> <td>把八个字符当作无符号的 quad word（64 位）。</td></tr> <tr><td>q</td> <td>Integer</td> <td>把八个字符当作有符号的 quad word（64 位）。</td></tr> <tr><td>S</td> <td>Fixnum</td> <td>把两个（如果使用 _ 则不同）连续字符当作 native 字节顺序的无符号的 short。</td></tr> <tr><td>s</td> <td>Fixnum</td> <td>把两个（如果使用 _ 则不同）连续字符当作 native 字节顺序的有符号的 short。</td></tr> <tr><td>U</td> <td>Integer</td> <td>UTF-8 字符，作为无符号整数。</td></tr> <tr><td>u</td> <td>String</td> <td>UU 编码。</td></tr> <tr><td>V</td> <td>Fixnum</td> <td>把四个字符当作 little-endian 字节顺序的无符号的 long。</td></tr> <tr><td>v</td> <td>Fixnum</td> <td>把两个字符当作 little-endian 字节顺序的无符号的 short。</td></tr> <tr><td>w</td> <td>Integer</td> <td>BER 压缩的整数。</td></tr> <tr><td>X</td> <td></td> <td>向后跳过一个字符。</td></tr> <tr><td>x</td> <td></td> <td>向前跳过一个字符。</td></tr> <tr><td>Z</td> <td>String</td> <td>和 * 一起使用，移除尾随的 null 直到第一个 null。</td></tr> <tr><td>@</td> <td></td> <td>跳过 length 参数给定的偏移量。</td></tr></tbody></table> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token string">&quot;abc \0\0abc \0\0&quot;</span><span class="token punctuation">.</span>unpack<span class="token punctuation">(</span><span class="token string">'A6Z6'</span><span class="token punctuation">)</span>   <span class="token comment">#=&gt; [&quot;abc&quot;, &quot;abc &quot;]</span>
<span class="token string">&quot;abc \0\0&quot;</span><span class="token punctuation">.</span>unpack<span class="token punctuation">(</span><span class="token string">'a3a3'</span><span class="token punctuation">)</span>           <span class="token comment">#=&gt; [&quot;abc&quot;, &quot; \000\000&quot;]</span>
<span class="token string">&quot;abc \0abc \0&quot;</span><span class="token punctuation">.</span>unpack<span class="token punctuation">(</span><span class="token string">'Z*Z*'</span><span class="token punctuation">)</span>       <span class="token comment">#=&gt; [&quot;abc &quot;, &quot;abc &quot;]</span>
<span class="token string">&quot;aa&quot;</span><span class="token punctuation">.</span>unpack<span class="token punctuation">(</span><span class="token string">'b8B8'</span><span class="token punctuation">)</span>                 <span class="token comment">#=&gt; [&quot;10000110&quot;, &quot;01100001&quot;]</span>
<span class="token string">&quot;aaa&quot;</span><span class="token punctuation">.</span>unpack<span class="token punctuation">(</span><span class="token string">'h2H2c'</span><span class="token punctuation">)</span>               <span class="token comment">#=&gt; [&quot;16&quot;, &quot;61&quot;, 97]</span>
<span class="token string">&quot;\xfe\xff\xfe\xff&quot;</span><span class="token punctuation">.</span>unpack<span class="token punctuation">(</span><span class="token string">'sS'</span><span class="token punctuation">)</span>     <span class="token comment">#=&gt; [-2, 65534]</span>
<span class="token string">&quot;now=20is&quot;</span><span class="token punctuation">.</span>unpack<span class="token punctuation">(</span><span class="token string">'M*'</span><span class="token punctuation">)</span>             <span class="token comment">#=&gt; [&quot;now is&quot;]</span>
<span class="token string">&quot;whole&quot;</span><span class="token punctuation">.</span>unpack<span class="token punctuation">(</span><span class="token string">'xax2aX2aX1aX2a'</span><span class="token punctuation">)</span>    <span class="token comment">#=&gt; [&quot;h&quot;, &quot;e&quot;, &quot;l&quot;, &quot;l&quot;, &quot;o&quot;]</span>
</code></pre></div><ul><li><a href="/school/develop/ruby/File类和方法.html">更多文件操作请参考</a>，File 类和方法</li></ul></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/devdiv/school/edit/master/docs/develop/ruby/字符串.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">上次更新: </span> <span class="time">5/3/2020, 9:39:20 PM</span></div></div> <!----> </div> <!----></div></div>
    <script src="/school/assets/js/app.5919148e.js" defer></script><script src="/school/assets/js/97.5980228e.js" defer></script>
  </body>
</html>
